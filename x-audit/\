//Enumeration functinos to get the list of all add-ons installed and get the values of a set of prefrences
exports.getAddonList = getAddonList;


//Gets a associated array of the ids and names of all add-ons installed 
function getAddonList() {
	console.log("pos1.1");
	const { AddonManager } = require("resource://gre/modules/AddonManager.jsm");
	var returnAddons = [];
	var addons = [];
	var addonObject = {};
	console.log("pos1.2");
	AddonManager.getAllAddons(function(addons){addons.forEach(function(addon){
		var addonId = (addon.id).toString();	
		var addonName = (addon.name).toString(); 
		addonObject = {id: addonId, name: addonName};
		addons.push(addonObject);
		console.log(addons[0].id);
	});});
	console.log("pos1.3");
	addons.forEach(function(addon){
        	//console.log(addon.name);
	});
	return addons;
}

//Gets an array of the value of all settings requested
function getPrefList(settings) {
	var prefs = Component.classes["@mozilla.org/preferences-services;1"].getService(Components.interface.nsIPrefBranch);
	var values = [];
	settings.forEach(function(setting,index){
		var type = prefs.getPrefType(setting);
		if(type == "PREF_BOOL") values[i] = prefs.getPrefBool(setting);
		else if (type == "PREF_STRING") values[i] = prefs.getPrefChar(setting);
		else if (type == "PREF_INT") values[i] = pref.getPrefInt(setting);
		else if (type == "PREF_INVALID") values[i] = "error";
	});
	return values;
}

